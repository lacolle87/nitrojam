server {
    listen 80;
    server_tokens off;

    location /media/ {
        root /var/html;
    }server {
         listen 80;
         server_tokens off;

         # Enable gzip compression
         gzip on;
         gzip_vary on;
         gzip_proxied any;
         gzip_comp_level 6; # Compression level (1-9)
         gzip_buffers 16 8k;
         gzip_http_version 1.1;
         gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

         # Cache static assets
         location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
             expires 30d;
             log_not_found off;
             access_log off;
         }

         location /media/ {
             root /var/html;
         }

         location /images/ {
             alias /images/;
         }

         location / {
             root /usr/share/nginx/html;
             index  index.html index.htm;
             try_files $uri /index.html;
             proxy_set_header        Host $host;
             proxy_set_header        X-Real-IP $remote_addr;
             proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header        X-Forwarded-Proto $scheme;
         }

         error_page   500 502 503 504  /50x.html;
         location = /50x.html {
             root   /var/html/frontend/;
         }
     }


    location /images/ {
        alias /images/;
    }

    location / {
        root /usr/share/nginx/html;
        index  index.html index.htm;
        try_files $uri /index.html;
        proxy_set_header        Host $host;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        X-Forwarded-Proto $scheme;
      }

      error_page   500 502 503 504  /50x.html;
      location = /50x.html {
        root   /var/html/frontend/;
      }
}